const config = require('../config');

module.exports = async (sock, anu) => {
    try {
        const { id, participants, action } = anu;
        
        for (let num of participants) {
            // Message de Bienvenue
            if (action === 'add' && config.WELCOME === 'true') {
                await sock.sendMessage(id, {
                    text: `‚õ©Ô∏è *BIENVENUE CHEZ LES OTSUTSUKI* ‚õ©Ô∏è\n\nüèÆ @${num.split("@")[0]}, ton chakra a √©t√© d√©tect√© dans cette dimension.\n\n_Pr√©pare-toi √† l'ascension._`,
                    mentions: [num]
                });
            } 
            // Message de D√©part
            else if (action === 'remove' && config.GOODBYE === 'true') {
                await sock.sendMessage(id, {
                    text: `üåÄ *EXIL* : Le Shinobi @${num.split("@")[0]} a quitt√© le clan. Son nom est effac√© des archives.`,
                    mentions: [num]
                });
            }
        }
    } catch (e) {
        console.error("Erreur Event :", e);
    }
};
